<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TaskList - Mobile Todo App</title>
    
    <!-- Cache Control Meta Tags -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Cache-busting script -->
    <script>
        // Add cache-busting query parameter to CSS
        const timestamp = Date.now();
        document.write('<link rel="stylesheet" href="styles.css?v=' + timestamp + '">');
    </script>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0366d6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>
    <div class="app-container">
        <!-- Header with title and progress -->
        <header class="header">
            <h1 class="app-title">Todo list</h1>
        </header>

        <!-- Main content area -->
        <main class="main-content">
            <!-- Task input section -->
            <div class="task-input-section">
                <form class="task-form" id="task-form">
                    <div class="input-group">
                        <input 
                            type="text" 
                            class="task-input" 
                            id="task-input" 
                            placeholder="Add new task"
                            maxlength="200"
                            autocomplete="off"
                        >
                        <!-- Area input removed -->
                        <input 
                            type="number" 
                            class="points-input" 
                            id="points-input" 
                            placeholder="Points"
                            min="1"
                            max="1000000"
                            autocomplete="off"
                        >
                        <button type="submit" class="add-button" id="add-button">
                            <svg viewBox="0 0 16 16" width="16" height="16">
                                <path d="M8 2a.75.75 0 0 1 .75.75v4.5h4.5a.75.75 0 0 1 0 1.5h-4.5v4.5a.75.75 0 0 1-1.5 0v-4.5h-4.5a.75.75 0 0 1 0-1.5h4.5v-4.5A.75.75 0 0 1 8 2z"/>
                            </svg>
                        </button>
                    </div>
                </form>
                
                <!-- Import/Export controls -->
                <div class="import-export-controls">
                    <input type="file" id="json-file-input" accept=".json" style="display: none;">
                    <button class="secondary-button" id="import-button">
                        <svg viewBox="0 0 16 16" width="16" height="16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="m7.646 1.146-3 3a.5.5 0 0 0 .708.708L7.5 2.707V11.5a.5.5 0 0 0 1 0V2.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0z"/>
                        </svg>
                        Import JSON
                    </button>
                    <button class="secondary-button" id="export-button">
                        <svg viewBox="0 0 16 16" width="16" height="16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        Export JSON
                    </button>
                    <button class="toggle-completed-button" id="toggle-completed-button">
                        <svg viewBox="0 0 16 16" width="16" height="16">
                            <path d="M8 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm13 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                        </svg>
                        Hide Completed
                    </button>
                    <button class="reset-storage-btn" id="reset-storage-btn" title="Reset all tasks">
                        <svg viewBox="0 0 16 16" width="14" height="14">
                            <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                        Reset
                    </button>
                </div>
            </div>

            <!-- Search bar moved above table -->
            <div class="search-bar-above-table">
                <div class="search-container">
                    <svg class="search-icon" viewBox="0 0 16 16" width="16" height="16">
                        <path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.75.75 0 0 1-1.06 1.06l-3.04-3.04zM11.5 7a4.5 4.5 0 1 0-9 0 4.5 4.5 0 0 0 9 0z"/>
                    </svg>
                    <input 
                        type="text" 
                        class="search-input" 
                        id="search-input" 
                        placeholder="Search tasks..."
                        autocomplete="off"
                    >
                </div>
            </div>

            <!-- Task list container -->
            <div class="task-list-container">
                <div class="task-list-table-wrapper">
                    <table class="task-list-table" id="task-list-table">
                        <thead>
                            <tr>
                                <th class="task-drag-col">⋮⋮</th>
                                <th class="task-num-col">#</th>
                                <th class="task-title-col">Task</th>
                                <th class="task-points-col">Pts</th>
                                <th class="task-actions-col">⋯</th>
                            </tr>
                        </thead>
                        <tbody id="task-list">
                            <!-- Tasks will be dynamically added here as <tr> -->
                        </tbody>
                    </table>
                </div>
                <div class="drop-zone-bottom" id="drop-zone-bottom"></div>
                <div class="empty-state" id="empty-state">
                    <svg class="empty-icon" viewBox="0 0 16 16" width="48" height="48">
                        <path d="M8 2a.75.75 0 0 1 .75.75v4.5h4.5a.75.75 0 0 1 0 1.5h-4.5v4.5a.75.75 0 0 1-1.5 0v-4.5h-4.5a.75.75 0 0 1 0-1.5h4.5v-4.5A.75.75 0 0 1 8 2z"/>
                    </svg>
                    <p>No tasks yet</p>
                    <p>Add your first task above to get started</p>
                </div>
            </div>
        </main>

        <!-- Footer with complete progress information -->
        <footer class="footer">
            <div class="progress-container">
                <div class="progress-info">
                    <span class="progress-text">
                        <span id="completed-count">0</span> of <span id="total-count">0</span> completed
                    </span>
                    <span class="progress-points">
                        <span id="points">0</span> / <span id="total-points">0</span> points
                    </span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
        </footer>

    </div>

    <!-- Loading indicator -->
    <div class="loading-indicator" id="loading-indicator">
        <div class="spinner"></div>
    </div>

    <!-- Custom confirmation modal -->
    <div class="confirmation-modal" id="confirmation-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Confirm Action</h3>
            </div>
            <div class="modal-body">
                <p id="modal-message">Are you sure?</p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-cancel" id="modal-cancel">Cancel</button>
                <button class="modal-btn modal-btn-confirm" id="modal-confirm">Confirm</button>
            </div>
        </div>
    </div>

    <script>
        // Add cache-busting query parameter to script
        const scriptTimestamp = Date.now();
        document.write('<script src="script.js?v=' + scriptTimestamp + '"><\/script>');
    </script>
</body>
</html>